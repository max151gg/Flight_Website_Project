@using ModelSkyPath.Models
@using SkyPath_Models.Models
@using SkyPath_Models.ViewModel
@model AnnouncementViewModel
@{
    ViewData["Title"] = "Announcement";
    Layout = "~/Views/Shared/MasterPage.cshtml";
}
<link rel="stylesheet" href="~/CSS/AnnouncementCSS.css" />
<div class="main-container">
    <h1>Announcements</h1>

    <div class="announcements-wrapper">
        <!-- Announcement 1 -->
        @foreach (Announcement announcement in Model.announcements)
        {
            <div class="announcement-item">
                <div class="announcement-header" onclick="toggleAnnouncement(this)">
                    <div class="announcement-title">@announcement.Title</div>
                    <div class="announcement-date">@announcement.Announcement_Date</div>
                    <div class="expand-icon">▼</div>
                </div>
                <div class="announcement-content">
                    <div class="announcement-text">
                        @announcement.Content
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<script>
    function toggleAnnouncement(header) {
        const content = header.nextElementSibling;
        const icon = header.querySelector('.expand-icon');

        // Close all other announcements
        document.querySelectorAll('.announcement-content').forEach(item => {
            if (item !== content && item.classList.contains('expanded')) {
                item.classList.remove('expanded');
                item.previousElementSibling.querySelector('.expand-icon').classList.remove('expanded');
            }
        });

        // Toggle current announcement
        content.classList.toggle('expanded');
        icon.classList.toggle('expanded');
    }
</script>

